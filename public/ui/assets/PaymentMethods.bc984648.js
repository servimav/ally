import{i as B,o as a,j as v,w as V,l as n,n as u,t as M,r as P,J as F,E as f,C as E,x as b,F as x,p as C,s as k,B as L,y as g,k as I,A as T,v as S,K as A,L as j,M as U}from"./index.e150ac7d.js";const q=["src","alt"],K={key:0},W={key:1},$=B({__name:"PaymentMethod",props:{method:null,label:null},setup(o){return(i,s)=>{const r=P("Card");return a(),v(r,{class:"dark:bg-primary dark:text-gray-300 hover:border-primary-low hover:border hover:shadow-slate-500 hover:shadow-xl text-center cursor-pointer"},{default:V(()=>[n("img",{src:o.method.image,alt:`${o.method.name}-${o.method.type}-logo`},null,8,q),o.label?(a(),u("span",K,M(o.label),1)):(a(),u("span",W,M(o.method.name),1))]),_:1})}}}),z=n("div",{class:"text-2xl text-center"},"Favoritos",-1),D=n("div",{class:"text-2xl text-center"},"Billeteras",-1),G=n("div",{class:"text-2xl text-center"},"Tarjetas",-1),J=n("div",{class:"text-2xl text-center"},"Crypto",-1),O=B({__name:"PaymentTypeSelector",emits:["select"],setup(o,{emit:i}){const s="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-6 lg:grid-cols-12 gap-2",r=F(),_=f(()=>r.cardMethods),d=f(()=>r.cryptoMethods),c=f(()=>r.favMethods),l=f(()=>r.walletMethods);return E(async()=>{await r.list()}),(w,m)=>{const y=P("Card");return a(),v(y,{class:"p-2 space-y-2"},{default:V(()=>[z,n("div",{class:b(s)},[(a(!0),u(x,null,C(k(c),(e,t)=>(a(),v($,{onClick:p=>i("select",e),key:`fav-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))]),D,n("div",{class:b(s)},[(a(!0),u(x,null,C(k(l),(e,t)=>(a(),v($,{onClick:p=>i("select",e),key:`wallet-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))]),G,n("div",{class:b(s)},[(a(!0),u(x,null,C(k(_),(e,t)=>(a(),v($,{onClick:p=>i("select",e),key:`cards-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))]),J,n("div",{class:b(s)},[(a(!0),u(x,null,C(k(d),(e,t)=>(a(),v($,{onClick:p=>i("select",e),key:`crypto-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))])]),_:1})}}}),R=o=>(A("data-v-f9655ccf"),o=o(),j(),o),Y=R(()=>n("button",{class:"btn-primary dark:btn-primary-low mt-2"},"Guardar",-1)),H=B({__name:"UserPaymentForm",props:{update:null},emits:["completed"],setup(o,{emit:i}){const s=o,r=F(),{axiosError:_}=L(),d=g(!0),c=g(),l=g({data:"",name:"",payment_id:0}),w=f(()=>{var e;switch((e=c.value)==null?void 0:e.type){case"BANK":return"Tarjeta";case"CRYPTO":return`Wallet ${c.value.name}`;case"WALLET":return`Link ${c.value.name}`;default:return""}});function m(e){setTimeout(()=>{c.value=e,l.value.payment_id=e.id,d.value=!1},500)}async function y(e=!1){if(c.value)try{s.update?e?await r.remove(l.value):await r.update(l.value):e||await r.store(l.value),i("completed",l.value)}catch(t){_(t)}}return s.update&&(l.value=s.update,d.value=!1,c.value=r.getById(l.value.payment_id)),(e,t)=>{const p=P("InputText"),N=P("Card");return a(),u("form",{onSubmit:t[4]||(t[4]=T(h=>y(!1),["prevent"]))},[I(N,null,{default:V(()=>[c.value?(a(),v($,{key:0,method:c.value,class:"w-16",onClick:t[0]||(t[0]=h=>d.value=!0)},null,8,["method"])):S("",!0),d.value?(a(),v(O,{key:1,onSelect:m})):S("",!0),I(p,{"id-key":"input-wallet-name",label:"Nombre",modelValue:l.value.name,"onUpdate:modelValue":t[1]||(t[1]=h=>l.value.name=h),type:"text",placeholder:"Nombre",required:""},null,8,["modelValue"]),I(p,{"id-key":"input-wallet-data",label:k(w),modelValue:l.value.data,"onUpdate:modelValue":t[2]||(t[2]=h=>l.value.data=h),type:"text",required:""},null,8,["label","modelValue"]),Y,n("button",{class:"btn bg-error text-white mt-2",onClick:t[3]||(t[3]=T(h=>y(!0),["prevent"]))},M(o.update?"Eliminar":"Cancelar"),1)]),_:1})],32)}}});const Q=U(H,[["__scopeId","data-v-f9655ccf"]]),X={class:"p-2"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2"},ee=["onClick"],te={class:"w-8"},ae=["src"],oe={class:"pl-4"},se=B({__name:"PaymentMethods",setup(o){const{axiosError:i}=L(),s=F(),r=f(()=>s.myMethods),_=g(),d=g(!1);function c(m){return s.getById(m)}function l(m){_.value=m,d.value=!0}async function w(){d.value=!1,_.value=void 0,await s.listMine()}return E(async()=>{try{await s.list(),await s.listMine()}catch(m){i(m)}}),(m,y)=>(a(),u("div",X,[d.value?S("",!0):(a(),u("button",{key:0,class:"btn-primary-low dark:btn-primary",onClick:y[0]||(y[0]=T(()=>{_.value=void 0,d.value=!0},["prevent"]))},"A\xF1adir")),d.value?(a(),v(Q,{key:1,update:_.value,onCompleted:w},null,8,["update"])):S("",!0),n("ul",Z,[(a(!0),u(x,null,C(k(r).methods,(e,t)=>{var p;return a(),u("li",{key:`${e.payment_id}-${t}`,class:"flex items-center border shadow-lg p-2 bg-white rounded-md cursor-pointer",onClick:N=>l(e)},[n("div",te,[n("img",{src:(p=c(e.payment_id))==null?void 0:p.image},null,8,ae)]),n("div",oe,M(e.name),1)],8,ee)}),128))])]))}});const ne=U(se,[["__scopeId","data-v-0d26a3a3"]]);export{ne as default};
