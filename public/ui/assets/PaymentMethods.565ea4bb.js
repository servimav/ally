import{h as P,o as a,i as y,w as L,k as o,l as u,t as M,r as S,O as I,J as f,G as U,A as B,F as $,n as b,q as h,E as V,B as w,j as C,D as E,z as T,P as F,Q as O,S as A,T as W,u as z,U as q,V as D,y as R,W as G,X as Y}from"./index.e54cea81.js";const j=["src","alt"],J={key:0},K={key:1},g=P({__name:"PaymentMethod",props:{method:null,label:null},setup(n){return(m,s)=>{const r=S("Card");return a(),y(r,{class:"dark:bg-primary-low dark:text-gray-300 hover:border-primary-low hover:border hover:shadow-slate-500 hover:shadow-xl dark:hover:text-slate-200 dark:hover:shadow-sm text-center cursor-pointer"},{default:L(()=>[o("img",{src:n.method.image,alt:`${n.method.name}-${n.method.type}-logo`},null,8,j),n.label?(a(),u("span",J,M(n.label),1)):(a(),u("span",K,M(n.method.name),1))]),_:1})}}}),Q=o("div",{class:"text-2xl text-center"},"Favoritos",-1),X=o("div",{class:"text-2xl text-center"},"E-WALLETS",-1),H=o("div",{class:"text-2xl text-center"},"BANCOS",-1),Z=o("div",{class:"text-2xl text-center"},"CRYPTO",-1),ee=P({__name:"PaymentTypeSelector",emits:["select"],setup(n,{emit:m}){const s="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-6 lg:grid-cols-12 gap-2",r=I(),_=f(()=>r.cardMethods),i=f(()=>r.cryptoMethods),c=f(()=>r.favMethods),l=f(()=>r.walletMethods);return U(async()=>{await r.list()}),(k,p)=>{const d=S("Card");return a(),y(d,{class:"p-2 space-y-2"},{default:L(()=>[Q,o("div",{class:B(s)},[(a(!0),u($,null,b(h(c),(e,t)=>(a(),y(g,{onClick:v=>m("select",e),key:`fav-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))]),X,o("div",{class:B(s)},[(a(!0),u($,null,b(h(l),(e,t)=>(a(),y(g,{onClick:v=>m("select",e),key:`wallet-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))]),H,o("div",{class:B(s)},[(a(!0),u($,null,b(h(_),(e,t)=>(a(),y(g,{onClick:v=>m("select",e),key:`cards-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))]),Z,o("div",{class:B(s)},[(a(!0),u($,null,b(h(i),(e,t)=>(a(),y(g,{onClick:v=>m("select",e),key:`crypto-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))])]),_:1})}}}),te=n=>(F("data-v-35575aee"),n=n(),O(),n),ae=te(()=>o("button",{class:"btn-primary dark:btn-primary-low dark:border-slate-200 mt-2"},"Guardar",-1)),se=P({__name:"UserPaymentForm",props:{update:null},emits:["completed"],setup(n,{emit:m}){const s=n,r=I(),{axiosError:_}=V(),i=w(!0),c=w(),l=w({data:"",name:"",payment_id:0}),k=f(()=>{var e;switch((e=c.value)==null?void 0:e.type){case"BANK":return"BANCO";case"CRYPTO":return`WALLET ${c.value.name}`;case"WALLET":return`E-WALLET ${c.value.name}`;default:return""}});function p(e){setTimeout(()=>{c.value=e,l.value.payment_id=e.id,i.value=!1},500)}async function d(e=!1){if(c.value)try{s.update?e?await r.remove(s.update.key):await r.update(s.update.key,l.value):e||await r.store(l.value),m("completed",l.value)}catch(t){_(t)}}return s.update&&(l.value=s.update.method,i.value=!1,c.value=r.getById(l.value.payment_id)),(e,t)=>{const v=S("InputText"),N=S("Card");return a(),u("form",{onSubmit:t[4]||(t[4]=E(x=>d(!1),["prevent"])),autocomplete:"off"},[C(N,null,{default:L(()=>[c.value?(a(),y(g,{key:0,method:c.value,class:"w-16",onClick:t[0]||(t[0]=x=>i.value=!0)},null,8,["method"])):T("",!0),i.value?(a(),y(ee,{key:1,onSelect:p})):T("",!0),C(v,{"id-key":"input-wallet-name",label:"Nombre",modelValue:l.value.name,"onUpdate:modelValue":t[1]||(t[1]=x=>l.value.name=x),type:"text",placeholder:"Nombre",required:""},null,8,["modelValue"]),C(v,{"id-key":"input-wallet-data",label:h(k),modelValue:l.value.data,"onUpdate:modelValue":t[2]||(t[2]=x=>l.value.data=x),type:"text",required:""},null,8,["label","modelValue"]),ae,o("button",{class:"btn bg-error text-white mt-2",onClick:t[3]||(t[3]=E(x=>d(!0),["prevent"]))},M(n.update?"Eliminar":"Cancelar"),1)]),_:1})],32)}}});const oe=A(se,[["__scopeId","data-v-35575aee"]]),le={class:"p-4 text-primary bg-yellow-300"},ne={class:"float-right ml-2"},re=P({__name:"MyPaymentLink",setup(n){const{copy:m,copied:s,isSupported:r}=W(),{error:_,success:i}=V(),c=z(),l=f(()=>{var d;return`${G}/payme/${(d=c.profile)==null?void 0:d.nick}`});async function k(){r.value?(await m(l.value),s.value&&i("Enlace copiado")):_("Su dispositivo no soporta la funci\xF3n")}function p(){var d;Y(`Metodos de Pago de ${(d=c.profile)==null?void 0:d.name}`,l.value)}return(d,e)=>{const t=S("BaseIcon");return a(),u("div",le,[o("span",ne,[o("div",{class:"cursor-pointer",onClick:k},[C(t,{path:h(q),size:"16",class:"fill-primary"},null,8,["path"])]),o("div",{class:"cursor-pointer",onClick:p},[C(t,{path:h(D),size:"16",class:"fill-primary"},null,8,["path"])])]),o("span",null,[R(" Su Enlace: "),o("b",null,M(h(l)),1)])])}}}),de={class:"p-2"},ce={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2"},ie=["onClick"],ue={class:"w-8"},me=["src"],pe={class:"pl-4"},_e=P({__name:"PaymentMethods",setup(n){const{axiosError:m}=V(),s=I(),r=f(()=>s.myMethods),_=w(),i=w(!1);function c(p){return s.getById(p)}function l(p,d){_.value={method:p,key:d},i.value=!0}async function k(){i.value=!1,_.value=void 0,await s.listMine()}return U(async()=>{try{await s.list(),await s.listMine()}catch(p){m(p)}}),(p,d)=>(a(),u("div",de,[C(re,{class:"mb-2"}),i.value?T("",!0):(a(),u("button",{key:0,class:"btn-primary-low dark:bg-primary dark:text-slate-100 dark:border-primary-low",onClick:d[0]||(d[0]=E(()=>{_.value=void 0,i.value=!0},["prevent"]))},"A\xF1adir")),i.value?(a(),y(oe,{key:1,update:_.value,onCompleted:k},null,8,["update"])):(a(),u("ul",ce,[(a(!0),u($,null,b(h(r).methods,(e,t)=>{var v;return a(),u("li",{key:`${e.payment_id}-${t}`,class:"flex items-center border shadow-lg p-2 bg-white rounded-md cursor-pointer dark:bg-primary-low dark:border-slate-300 dark:text-slate-200",onClick:N=>l(e,t)},[o("div",ue,[o("img",{src:(v=c(e.payment_id))==null?void 0:v.image},null,8,me)]),o("div",pe,M(e.name),1)],8,ie)}),128))]))]))}});const ye=A(_e,[["__scopeId","data-v-ed0de72f"]]);export{ye as default};
