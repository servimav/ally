import{h as B,o as a,i as v,w as V,k as r,l as u,t as P,r as S,V as I,J as f,G as N,D as b,F as x,n as C,q as k,E as A,z as $,j as M,C as E,B as T,W as U,X as W,Y as F}from"./index.c76a5728.js";import{_ as O}from"./MyLink.vue_vue_type_script_setup_true_lang.e3142006.js";const q=["src","alt"],Y={key:0},z={key:1},w=B({__name:"PaymentMethod",props:{method:null,label:null},setup(s){return(i,o)=>{const l=S("Card");return a(),v(l,{class:"dark:bg-primary-low dark:text-gray-300 hover:border-primary-low hover:border hover:shadow-slate-500 hover:shadow-xl dark:hover:text-slate-200 dark:hover:shadow-sm text-center cursor-pointer"},{default:V(()=>[r("img",{src:s.method.image,alt:`${s.method.name}-${s.method.type}-logo`},null,8,q),s.label?(a(),u("span",Y,P(s.label),1)):(a(),u("span",z,P(s.method.name),1))]),_:1})}}}),D=r("div",{class:"text-2xl text-center"},"Favoritos",-1),G=r("div",{class:"text-2xl text-center"},"E-WALLETS",-1),R=r("div",{class:"text-2xl text-center"},"BANCOS",-1),j=r("div",{class:"text-2xl text-center"},"CRYPTO",-1),J=B({__name:"PaymentTypeSelector",emits:["select"],setup(s,{emit:i}){const o="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-6 lg:grid-cols-12 gap-2",l=I(),y=f(()=>l.cardMethods),d=f(()=>l.cryptoMethods),c=f(()=>l.favMethods),n=f(()=>l.walletMethods);return N(async()=>{await l.list()}),(g,m)=>{const p=S("Card");return a(),v(p,{class:"p-2 space-y-2"},{default:V(()=>[D,r("div",{class:b(o)},[(a(!0),u(x,null,C(k(c),(e,t)=>(a(),v(w,{onClick:_=>i("select",e),key:`fav-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))]),G,r("div",{class:b(o)},[(a(!0),u(x,null,C(k(n),(e,t)=>(a(),v(w,{onClick:_=>i("select",e),key:`wallet-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))]),R,r("div",{class:b(o)},[(a(!0),u(x,null,C(k(y),(e,t)=>(a(),v(w,{onClick:_=>i("select",e),key:`cards-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))]),j,r("div",{class:b(o)},[(a(!0),u(x,null,C(k(d),(e,t)=>(a(),v(w,{onClick:_=>i("select",e),key:`crypto-${e.id}-${t}`,method:e},null,8,["onClick","method"]))),128))])]),_:1})}}}),K=s=>(U("data-v-35575aee"),s=s(),W(),s),X=K(()=>r("button",{class:"btn-primary dark:btn-primary-low dark:border-slate-200 mt-2"},"Guardar",-1)),H=B({__name:"UserPaymentForm",props:{update:null},emits:["completed"],setup(s,{emit:i}){const o=s,l=I(),{axiosError:y}=A(),d=$(!0),c=$(),n=$({data:"",name:"",payment_id:0}),g=f(()=>{var e;switch((e=c.value)==null?void 0:e.type){case"BANK":return"BANCO";case"CRYPTO":return`WALLET ${c.value.name}`;case"WALLET":return`E-WALLET ${c.value.name}`;default:return""}});function m(e){setTimeout(()=>{c.value=e,n.value.payment_id=e.id,d.value=!1},500)}async function p(e=!1){if(c.value)try{o.update?e?await l.remove(o.update.key):await l.update(o.update.key,n.value):e||await l.store(n.value),i("completed",n.value)}catch(t){y(t)}}return o.update&&(n.value=o.update.method,d.value=!1,c.value=l.getById(n.value.payment_id)),(e,t)=>{const _=S("InputText"),L=S("Card");return a(),u("form",{onSubmit:t[4]||(t[4]=E(h=>p(!1),["prevent"])),autocomplete:"off"},[M(L,null,{default:V(()=>[c.value?(a(),v(w,{key:0,method:c.value,class:"w-16",onClick:t[0]||(t[0]=h=>d.value=!0)},null,8,["method"])):T("",!0),d.value?(a(),v(J,{key:1,onSelect:m})):T("",!0),M(_,{"id-key":"input-wallet-name",label:"Nombre",modelValue:n.value.name,"onUpdate:modelValue":t[1]||(t[1]=h=>n.value.name=h),type:"text",placeholder:"Nombre",required:""},null,8,["modelValue"]),M(_,{"id-key":"input-wallet-data",label:k(g),modelValue:n.value.data,"onUpdate:modelValue":t[2]||(t[2]=h=>n.value.data=h),type:"text",required:""},null,8,["label","modelValue"]),X,r("button",{class:"btn bg-error text-white mt-2",onClick:t[3]||(t[3]=E(h=>p(!0),["prevent"]))},P(s.update?"Eliminar":"Cancelar"),1)]),_:1})],32)}}});const Q=F(H,[["__scopeId","data-v-35575aee"]]),Z={class:"p-2"},ee={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2"},te=["onClick"],ae={class:"w-8"},oe=["src"],se={class:"pl-4"},le=B({__name:"PaymentMethods",setup(s){const{axiosError:i}=A(),o=I(),l=f(()=>o.myMethods),y=$(),d=$(!1);function c(m){return o.getById(m)}function n(m,p){y.value={method:m,key:p},d.value=!0}async function g(){d.value=!1,y.value=void 0,await o.listMine()}return N(async()=>{try{await o.list(),await o.listMine()}catch(m){i(m)}}),(m,p)=>(a(),u("div",Z,[M(O,{type:"payment",class:"mb-2"}),d.value?T("",!0):(a(),u("button",{key:0,class:"btn-primary-low dark:bg-primary dark:text-slate-100 dark:border-primary-low",onClick:p[0]||(p[0]=E(()=>{y.value=void 0,d.value=!0},["prevent"]))},"A\xF1adir")),d.value?(a(),v(Q,{key:1,class:"max-w-md",update:y.value,onCompleted:g},null,8,["update"])):(a(),u("ul",ee,[(a(!0),u(x,null,C(k(l).methods,(e,t)=>{var _;return a(),u("li",{key:`${e.payment_id}-${t}`,class:"flex items-center border shadow-lg p-2 bg-white rounded-md cursor-pointer dark:bg-primary-low dark:border-slate-300 dark:text-slate-200",onClick:L=>n(e,t)},[r("div",ae,[r("img",{src:(_=c(e.payment_id))==null?void 0:_.image},null,8,oe)]),r("div",se,P(e.name),1)],8,te)}),128))]))]))}});const de=F(le,[["__scopeId","data-v-5c0c52cf"]]);export{de as default};
